{% extends 'base.html' %}

{% block head_title %}Edit fields for {{ call['identifier'] }}{% endblock %}

{% block body_title %}Edit fields for {{ call['identifier'] }}{% endblock %}

{% block main %}

{% for field in call['fields'] %}
{% set post_url = url_for('.field', cid=call['identifier'], fid=field['identifier']) %}
<div class="card mt-2">
  <div class="card-body">
    {% include 'display_field_definition.html' %}
  </div>
</div>
{% endfor %} {# for field in call['fields'] #}
<div class="card mt-2">
  <div class="card-body">
    {% for field_type in constants.FIELD_TYPES %}
    <button type="button" class="btn btn-primary mr-3"
	    data-toggle="modal" data-target="#_{{ field_type }}Modal">
      Add {{ field_type }} field
    </button>
    {% endfor %} {# for field_type in constants.FIELD_TYPES #}
  </div>
</div>

{% set post_url = url_for('.fields', cid=call['identifier']) %}
{% for field_type in constants.FIELD_TYPES %}
{% include 'modal_field_create.html' %}
{% endfor %}

{% for field in call['fields'] %}
{% set post_url = url_for('.field', cid=call['identifier'], fid=field['identifier']) %}
{% include 'modal_field_edit.html' %}
{% endfor %}

{% endblock %} {# block main #}

{% block actions %}
<div class="mt-2">
  <form action="{{ url_for('.display', cid=call['identifier']) }}"
	method="GET">
    <button type="submit" class="btn btn-block btn-dark">Back</button>
  </form>
</div>
{% endblock %}
