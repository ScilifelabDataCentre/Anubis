{# Macros #}

{% macro call_link(call, title=True) -%}
<a href="{{ url_for('call.display', cid=call['identifier']) }}"
   class="font-weight-bold">
  {% if title %}
  {{ call['identifier'] }}: {{ call['title'] or '' }}
  {% else %}
  {{ call['identifier'] }}
  {% endif %}
</a>
{%- endmacro %}

{% macro proposal_link(proposal) -%}
<a href="{{ url_for('proposal.display', pid=proposal['identifier']) }}"
   title="{{ proposal['title'] or 'No title' }}"
   class="font-weight-bold">
  {{ proposal['identifier'] }} {{ proposal['title'] or 'No title' }}
</a>
{%- endmacro %}

{% macro review_link(review) -%}
<a href="{{ url_for('review.display', iuid=review['_id']) }}"
   class="font-weight-bold text-info">
  Review
  {% if review.get('finalized') %}
  <span class="badge badge-pill badge-success">Finalized</span>
  {% else %}
  <span class="badge badge-pill badge-warning">Not finalized</span>
  {% endif %}
</a>
{%- endmacro %}

{% macro closed(call) -%}
<span class="badge badge-pill badge-{{ call['tmp']['color'] }}">
  {{ call['tmp']['text'] }}</span>
{%- endmacro %}

{% macro submitted(proposal) -%}
{% if proposal.get('submitted') %}
  <span class="badge badge-pill badge-success">Submitted</span>
{% else %}
  <span class="badge badge-pill badge-warning">Not submitted</span>
{% endif %}
{%- endmacro %}

{% macro decision_link(decision, block=False) -%}
{% if decision %}
  {% if decision.get('finalized') %}
    <a href="{{ url_for('decision.display', iuid=decision['_id']) }}"
       role="button"
       class="btn my-1 btn-dark font-weight-bold {{ block and 'btn-block' }}">
      Decision
    </a>
  {% else %}
    <a href="{{ url_for('decision.display', iuid=decision['_id']) }}"
       role="button"
       class="btn my-1 btn-outline-secondary {{ block and 'btn-block' }}">
      Decision
    </a>
  {% endif %}
{% else %}
  -
{% endif %} {# if decision #}
{%- endmacro %}
